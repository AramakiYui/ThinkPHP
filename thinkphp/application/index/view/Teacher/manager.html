<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <title>{block name="title"}预约时间管理{/block}</title>
    <link rel="stylesheet" type="text/css" href="\static\bootstrap-3.4.1-dist\css\bootstrap.min.css">
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
 
<body>
    <div class="container">
    <div class="row clearfix">
        <div class="col-md-12 column">
            <nav class="navbar navbar-default" role="navigation">
                <div class="navbar-header">
                     <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                         <span class="sr-only">Toggle navigation</span>
                         <span class="icon-bar"></span>
                         <span class="icon-bar"></span>
                         <span class="icon-bar"></span>
                     </button> <a class="navbar-brand" href="{:url('http://www.schoolsubcribe/index.php/index.php/index/Teacher/index')}">我的主页</a>
                </div>

                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav">
                        <li class="dropdown">
                             <a href="#" class="dropdown-toggle" data-toggle="dropdown">时间管理<strong class="caret"></strong></a>
                            <ul class="dropdown-menu">
                                <li>
                                     <a href="{:url('http://www.schoolsubcribe/index.php/index/Teacher/manager')}">管理我的时间</a>
                                </li>
                                <li>
                                     <a href="" data-toggle="modal" data-target="#fabu">发布新的时间</a>
                                </li>
                            </ul>
                        </li>
                    </ul>


                    <ul class="nav navbar-nav navbar-right">
                        <li>
                             <a>欢迎您！{$t_data.t_name}老师</a>
                        </li>

                        <li class="dropdown">
                             <a href="#" class="dropdown-toggle" data-toggle="dropdown">个人中心<strong class="caret"></strong></a>
                            <ul class="dropdown-menu">
                                <li>
                                     <a href="{:url('http://www.schoolsubcribe/index.php/index/Teacher/information')}">我的资料</a>
                                </li>
                            
                                <li class="divider">
                                </li>
                                <li>
                                     <a href="{:url('http://www.schoolsubcribe/index.php/index/Teacher/logOff')}">退出登录</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
                
            </nav>
        </div>
    </div>
    </div>

<div class="container">
    <div class="row clearfix">
        <div class="col-md-12 column">
            
            <h3 class="text-left">
                管理我的时间
            </h3>
            <table class="table table-hover table-bordered">
                <thead>
                <tr>
                    <th>预约编号</th>
                    <th>时间</th>
                    <th>地点</th>
                    <th>预约状态</th>
                    <th>课程</th>
                    <th>预约学生姓名</th>
                    <th>操作</th>
                </tr>
                </thead>
                {volist name="time" id="value"}
                <tr>
                    <th>{$value.seq}</th>
                    <th>{$value.date} {$value.time_seg}</th>
                    <th>{$value.place}</th>
                    <th>{if $value.free == 0}未预约{else /}{/if}
                        {if $value.free == 1}未完成{else /}{/if}
                        {if $value.free == 2}已预约{else /}{/if}
                        {if $value.free == 3}已完成{else /}{/if}</th>
                    <th>{$value.class}</th>
                    <th>{$value.stu_name}</th>
                    <td>

                        <button type="button" class="btn btn-default btn-primary
                        {if $value.free == 1 or $value.free == 2 or $value.free == 3}disabled{else /} "
                                onclick="values({$value.seq})"{/if}">修改</button>

                        <a href="{:url('http://www.schoolsubcribe/index.php/index/Teacher/deleteTime','t_id='.$value.t_id.'&delete=1&seq='.$value.seq)}"
                           class="btn btn-default btn-danger {if $value.free == 2}disabled{else /}"
                           role="button" {/if}">
                            删除
                        </a>

                    </td>
                </tr>
                {/volist}

        </div>
    </div>
</div>
<script type="text/javascript">
    $(function(){
        $('#xiugai').modal("hide");
    });
    function values(ID){
        $('#seq_id').val(ID);
        $('#xiugai').modal('show');
    }
</script>
 <div id="xiugai" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h1 class="text-center">修改时间</h1>
                    </div>
                    <div class="modal-body">
                        <form class="form-group" action="{:url('http://www.schoolsubcribe/index.php/index/Teacher/editTime')}" method="post">
                            <div class="form-group">
                                <label for="">日期</label>
                                <input class="form-control" type="date" placeholder="年/月/日" id="date_publish1" name="date">
                            </div>
                            <div class="form-group">
                                <label for="">节次</label>
                                <br>

                                <input type="hidden" name="t_id" value="{$t_data.t_id}">
                                <input type="hidden" id="seq_id" name="seq" value="">

                                <div class="btn-group" data-toggle="buttons">
                                <label class="btn btn-primary">
                                    <input type="radio" name="time_seg" id="option01" value="第一大节">第一大节(08:00~10:00)
                                </label>
                                <label class="btn btn-primary">
                                    <input type="radio" name="time_seg" id="option02" value="第二大节">第二大节(10:00~12:00)
                                </label>
                                <br>
                                <label class="btn btn-primary">
                                    <input type="radio" name="time_seg" id="option03" value="第三大节">第三大节(14:00~16:00)
                                 </label>   
                                <label class="btn btn-primary">
                                    <input type="radio" name="time_seg" id="option04" value="第四大节">第四大节(16:00~18:00)
                                </label>
                                 </div>
                            </div>
                            <div class="form-group">
                                <label for="">地点</label>
                                <input class="form-control" type="text" placeholder="请输入教室名" name="place">
                            </div>
                            
                            <div class="text-right">
                                <button class="btn btn-primary" type="submit" style="background-color: #3a8cd2b3;border: 0px solid transparent;">提交</button>
                                <button class="btn btn-danger" data-dismiss="modal" style="background-color: #fb5e5999;border: 0px solid transparent;">取消</button>
                            </div>

                        </form>
                    </div>
                </div>
            </div>
        </div>

    <script>
        $(function(){
            //得到当前时间
            var date_now = new Date();
            //得到当前年份
            var year = date_now.getFullYear();
            //得到当前月份
            //注：
            //  1：js中获取Date中的month时，会比当前月份少一个月，所以这里需要先加一
            //  2: 判断当前月份是否小于10，如果小于，那么就在月份的前面加一个 '0' ， 如果大于，就显示当前月份
            var month = date_now.getMonth()+1 < 10 ? "0"+(date_now.getMonth()+1) : (date_now.getMonth()+1);
            //得到当前日子（多少号）
            var date = date_now.getDate() < 10 ? "0"+date_now.getDate() : date_now.getDate();
            //设置input标签的max属性
            $("#date_publish").attr("min",year+"-"+month+"-"+date);
            $("#date_publish1").attr("min",year+"-"+month+"-"+date);
        })
    </script>
    <div id="fabu" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h1 class="text-center">发布新的时间</h1>
                </div>
                <div class="modal-body">
                    <form class="form-group" action="{:url('http://www.schoolsubcribe/index.php/index/Teacher/publishTime')}" method="post">
                        <div class="form-group">
                            <label for="">日期</label>
                            <input class="form-control" type="date" value="" id="date_publish" name="date">
                        </div>
                        <div class="form-group">
                            <label for="">节次</label>
                            <br>
                            <div class="btn-group" data-toggle="buttons">
                                <label class="btn btn-primary">
                                    <input type="radio" name="time_seg" id="option1" value="第一大节">第一大节(08:00~10:00)
                                </label>
                                <label class="btn btn-primary">
                                    <input type="radio" name="time_seg" id="option2" value="第二大节">第二大节(10:00~12:00)
                                </label>
                                <br>
                                <label class="btn btn-primary">
                                    <input type="radio" name="time_seg" id="option3" value="第三大节">第三大节(14:00~16:00)
                                </label>
                                <label class="btn btn-primary">
                                    <input type="radio" name="time_seg" id="option4" value="第四大节">第四大节(16:00~18:00)
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="">地点</label>
                            <input class="form-control" type="text" name="place" placeholder="请输入教室名">
                        </div>
                        <div class="form-group">
                            <label for="">课程</label>
                            <input class="form-control" type="text" name="class" placeholder="请输入课程名">
                        </div>

                        <div class="text-right">
                            <button class="btn btn-primary" type="submit" style="background-color: #3a8cd2b3;border: 0px solid transparent;">提交</button>
                            <button class="btn btn-danger" data-dismiss="modal" style="background-color: #fb5e5999;border: 0px solid transparent;">取消</button>
                        </div>

                    </form>
                </div>
            </div>
        </div>
    </div>


    <body>
 